{% extends "base.html" %}

{% block css %}
	#clientList{
		list-style:none;
	}

{% endblock css%}


{% block pageTitle %}Roster{% endblock pageTitle %}
{% block content %}

<div>
	<ul id= "clientList"> /*unordered list*/
		Replace me
    </ul>
</div>


<script>
    const clientsElement = document.getElementById("clientList")
    const xhr = new XMLHttpRequest()
    const method = 'GET' //http get method
    const url = "/rosterlist/" /*trailing slash important!!*/
    const responseType = "json"


    xhr.responseType = responseType
    xhr.open(method, url) /* open request with specified method at url */
    xhr.onload = function(){ /*upon loading execute this function */
        const serverResponse = xhr.response
        const clients = serverResponse.response
        var clientsList = "";
        var i;
        for(i=0;i<clients.length;i++){
            console.log(i)
            console.log(clients[i])
            var client = "<li>"+clients[i].lastname+", "+clients[i].firstname+"</li>" /*to access Model attr remove '_'*/
            clientsList+=client;
        }
        clientsElement.innerHTML = clientsList
        console.log(clients)
    }
    xhr.send() /*triggers request */

</script>
{% endblock content %}